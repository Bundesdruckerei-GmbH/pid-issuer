<!--

    Copyright Bundesdruckerei 2024. Licensed under EUPL-1.2, see the accompanying license file.

-->
<!DOCTYPE html>
<html th:replace="~{layout :: main(~{::title}, ~{::#content})}" xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>Issuance protocol - Variant C</title>
</head>
<body>
<main>
    <div id="content" class="container mt-2" style="max-width: 40rem;">
        <h1>Variant C</h1>
        <h2>Issuance protocol</h2>
        <ul>
            <li>The issuer URI to use as base for metadata fetching is
                "https://demo.pid-issuer.bundesdruckerei.de/c". The <a
                        th:href="@{/c/.well-known/openid-credential-issuer}">metadata</a> contains the information
                required to
                construct the initial authorization request sent by the wallet to start the issuance.
            </li>
            <li>
                <a href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0.html" rel="noopener">OpenID for
                    Verifiable Credential Issuance Implementers Draft 1 (Draft 13) is used.</a>
            </li>
            <li>
                Issuance is performed using the authorization code flow with scope parameter and can be initiated by the
                wallet.
            </li>
            <li>
                The use of <a href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0.html" rel="noopener">Pushed
                Authorization Requests</a> is <strong>required</strong>.
            </li>
            <li>
                The use of <a href="https://www.rfc-editor.org/rfc/rfc7636">PKCE</a> is <strong>required</strong>.
            </li>
            <li>
                The use of any <a href="https://datatracker.ietf.org/doc/draft-ietf-oauth-attestation-based-client-auth/02/" rel="noopener">
                Client Attestation</a> is currently completely <strong>ignored</strong>.
            </li>
            <li>
                The use of <a href="https://datatracker.ietf.org/doc/html/rfc9449" rel="noopener">DPoP</a> is <strong>required</strong>.
            </li>
            <li>
                Issuance will happen at the credential endpoint, which supports single or batch issuance through the use
                of proof or proofs parameter as specified in the current <a
                    href="https://openid.github.io/OpenID4VCI/openid-4-verifiable-credential-issuance-wg-draft.html#name-credential-request" rel="noopener">OpenID4VCI
                working draft</a>.
                Batch-Credential endpoint, deferred issuance and the notification endpoint are unsupported.
            </li>
            <li>
                Credentials can be issued using the provided test eID cards.
            </li>
        </ul>

        <h2>Credential offer</h2>
        <div id="credentialOffer" class="container mt-2" style="max-width: 40rem;">
            <p>It is intended, that the wallet initiates the issuance by sending an authorization request directly to
                the issuer. For convenience the following credential offer can be used to start issuer initiated
                issuance if supported by the wallet. It will use the scheme
                "openid-credential-offer".</p>
            <table class="table">
                <tr>
                    <th><a href="./sdjwt">SD-JWT</a></th>
                    <th><a href="./msomdoc">MSO mdoc</a></th>
                </tr>
                <tr>
                    <td>
                        You can <br>
                        <a class="btn btn-primary" th:href="${sdJwtUri}" rel="noopener">open the wallet on the current device</a><br>
                        or use this qr code<br>
                        <img th:src="${sdJwtQr}" alt="QR-Code"/><br>
                        to use a wallet on another device.
                    </td>
                    <td>
                        You can <br>
                        <a class="btn btn-primary" th:href="${msoMdocUri}" rel="noopener">open the wallet on the current device</a><br>
                        or use this qr code<br>
                        <img th:src="${msoMdocQr}" alt="QR-Code"/><br>
                        to use a wallet on another device.
                    </td>
                </tr>
            </table>
        </div>
    </div>
</main>
</body>
</html>
